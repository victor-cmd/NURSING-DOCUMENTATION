self.System=self.System||(()=>{const t={},e={},n=t=>t.replace(/^.\/(\w+)-[a-f0-9]{8,}.js$/,"./$1.js"),o={register(s,r){const c=n(`./${((document.currentScript||{}).src||"").split("?").shift().split("/").pop()}`),i={},a=r((t,e)=>e?i[t]=e:Object.assign(i,t),o);t[c]=Promise.all(s.map((t,e)=>o.import(n(t)).then(a.setters[e]))).then(()=>(a.execute(),i)).catch(t=>{throw t.message=`evaluating module ${c}: ${t.message}`,t}),e[c]&&(e[c](t[c]),delete e[c])},import:n=>t[n]||(t[n]=new Promise((t,o)=>{const s=setTimeout(()=>{o(new Error(`could not resolve ${n}`))},1e4);e[n]=(e=>{clearTimeout(s),t(e)})}))};return o})(),System.register(["./frameworks-32fdce0f.js"],function(t,e){"use strict";var n,o,s,r,c,i,a,l,u,d,m,p,j,f,h,g,v,b,L,y,C,w,E,T,k,S,A,M,x,H,I,q,$,D,_,B,P;return{setters:[function(t){n=t.b8,o=t.u,s=t.b,r=t._,c=t.g,i=t.Q,a=t.q,l=t.aj,u=t.o,d=t.h,m=t.d,p=t.l,j=t.I,f=t.x,h=t.f,g=t.t,v=t.e,b=t.ah,L=t.s,y=t.U,C=t.z,w=t.R,E=t.X,T=t.H,k=t.aI,S=t.a4,A=t.Z,M=t.aF,x=t.at,H=t.y,I=t.O,q=t.r,$=t.w,D=t.F,_=t.b9,B=t.n,P=t.Y}],execute:function(){function t(t){const e=new WeakMap;for(const n of t)e.set(n,n.getBoundingClientRect());return e}async function e(t,e,o){const s=e.get(t),r=o.get(t);if(!s||!r)throw new Error("invariant: Must have old and new positions for the element to animate -- app/assets/modules/github/magic-move.js:18");const c=s.left-r.left,i=s.top-r.top;0===c&&0===i||(await n(),t.style.transform=`translateZ(0) translate(${c}px, ${i}px)`,t.style.transition="transform 0s",await n(),t.style.transform="",t.style.transition="transform 500ms",await new Promise(e=>t.addEventListener("transitionend",e,{once:!0})),t.style.transition="")}function F(n,o){const s=t(n),r=[];for(const t of n)r.push(e(t,o,s));return Promise.all(r)}let R;function K(t){if(!t)return;R&&clearTimeout(R);const e=s(document,".js-project-updated-message");e.textContent=t,e.classList.remove("d-none"),R=setTimeout(function(){e.textContent="",e.classList.add("d-none")},3e3)}function U(t,e){const n=`column-${t.id}`,o=document.getElementById(n);if(o)return o;{const o=new IncludeFragmentElement;return o.id=n,o.src=`${e}/${t.id}`,o}}function N(t,e){const n=`card-${t}`,o=document.getElementById(n);if(o)return o;{const o=new IncludeFragmentElement;return o.id=n,o.src=`${e}/${t}`,o.onerror=function(){o.remove()},o}}function W(t,e){const n=e.querySelector(".js-project-column-automation-footer");if(!n)return;const o=s(n,".js-project-column-automation-summary");t.automation_summary&&t.purpose?(o.textContent=t.purpose,o.setAttribute("aria-label",t.automation_summary),n.classList.remove("d-none")):n.classList.add("d-none")}function O(t,e,n,o){t.setAttribute("data-column-id",e),t.setAttribute("data-column-name",n),t.href=`#column-${e}`,s(t,".js-column-nav-name").textContent=n;const r=s(t,".js-column-nav-card-count");r.textContent=o;const c=i(parseInt(o),"item");r.setAttribute("aria-label",`Contains ${o} ${c}`)}function V(t,e,n,o,r,c){const i=t.content.cloneNode(!0),a=s(i,".js-project-column-navigation-item",HTMLAnchorElement);a.classList.toggle("selected",c),O(a,n,o,r);const l=e.querySelectorAll(".js-project-column-navigation-item").length+1;s(i,".js-column-nav-index").textContent=l.toString(),e.appendChild(i)}function z(t,e,n){const o=document.createDocumentFragment();for(const s of e)o.appendChild(n[s]);t.innerHTML="",t.appendChild(o)}const G=o(async function(e,n){K(n.message);const o=e.querySelectorAll(".js-project-column"),i=t(o),a=e.getAttribute("data-url")||"",l=e.getAttribute("data-columns-url")||"",u=e.getAttribute("data-cards-url")||"",d=n.state||await r(a);c(e,"will-update-project",d);const m=document.activeElement;if(function(t,e){const n=Array.from(t.querySelectorAll(".js-project-column")).map(t=>t.getAttribute("data-id"));return e.columns.map(t=>String(t.id)).join(",")!==n.join(",")}(e,d)){c(e,"will-update-project-columns");const t={},n=document.createDocumentFragment();for(const e of d.columns){const o=U(e,l),s=o.querySelector(".js-project-column-cards");s&&(t[s.id]=s.scrollTop),n.appendChild(o)}const r=e.querySelector(".js-new-project-column-container");r&&r.remove();const a=s(e,".js-new-column-blankslate");a.remove(),e.innerHTML="",e.appendChild(n),r&&(e.appendChild(r),s(r,".js-new-column-button").classList.toggle("d-none",0===d.columns.length)),e.appendChild(a),a.classList.toggle("d-none",d.columns.length>0),function(t){const e=document.querySelector(".js-project-column-nav");if(!e)return;const n=s(e,".js-column-nav-template",HTMLTemplateElement),o=e.scrollLeft;let r;for(const s of document.querySelectorAll(".js-project-column-navigation-item"))s.remove(),s.classList.contains("selected")&&(r=s.getAttribute("data-column-id"));for(const s of t)V(n,e,s.id.toString(),s.name,s.card_ids.length.toString(),r===s.id.toString());e.scrollLeft=o}(d.columns);for(const e in t){const n=document.getElementById(e);if(!(n instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/project-updater.js:253");n.scrollTop=t[e]}await F(o,i)}const p=e.querySelectorAll(".js-project-column-card"),j=t(p),f={};for(const t of d.columns)for(const e of t.card_ids)f[e]=N(e.toString(),u);for(const t of d.columns){const e=document.getElementById(`column-${t.id}`);if(!e||"INCLUDE-FRAGMENT"===e.tagName)return;const n=e.querySelector(".js-project-column-name");if(n){n.textContent=t.name;const o=e.querySelector(".js-project-column-name-field");o instanceof HTMLInputElement&&(o.value=t.name,o.setAttribute("value",t.name))}const o=e.querySelector(".js-column-card-count");o&&(o.textContent=t.card_ids.length.toString()),W(t,e),z(s(e,".js-project-column-cards"),t.card_ids,f)}c(e,"update-project"),await F(p,j),m&&document.activeElement!==m&&m.focus()},100);const J=["assignee","author","is","label","milestone","repo","review","state","status","type"],X=["assignee","label"],Z=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function Q(t,e){let n=t[e];return n||(n={tokenFilters:[],matchIfMissing:!1},t[e]=n),n}function Y(t,e,n){const o=t.tokenFilters.find(t=>t.token===e);o?o.negated=n:t.tokenFilters.push({token:e,negated:n}),t.matchIfMissing=!1}function tt(t){const e=t.match(Z)||[],n={};for(const o of e){const t=J.find(t=>o.match(new RegExp(`^-?${t}:.*`)));if(t){const e=o.replace(new RegExp(`^-?${t}:\\s*"?(.*?)"?\\s*$`),"$1").replace(/\\(")/g,"$1");if(e.length>0){Y(Q(n,t),e,o.startsWith("-"))}}else{const t=X.find(t=>o===`no:${t}`);if(t)Q(n,t).matchIfMissing=!0;else if(o.length>0){Y(Q(n,"title"),o,!1)}}}return n}let et,nt;function ot(){return s(document,".js-card-filter-input",HTMLInputElement).value.trim().toLowerCase()}function st(t,e){for(const o in e){const s=t.getAttribute(`data-card-${o}`)||"";let r=[];""!==s.trim()&&(r=JSON.parse(s));const c=e[o];if(c.matchIfMissing){if(r.length>0)return!1}else for(const t of c.tokenFilters)if("title"===o){if(!rt(t.token,r))return!1}else{const e=(n=t.token,-1!==r.indexOf(n));if(t.negated){if(e&&r.length>0)return!1}else if(!e)return!1}}var n;return!0}function rt(t,e){return e.some(e=>e.startsWith(t))}function ct(){const t=ot();for(const e of document.querySelectorAll(".js-project-columns-container .js-project-column")){const n=s(e,".js-filtered-column-card-count");if(t.length>0){const t=e.querySelectorAll(".js-project-column-card:not(.d-none)").length;n.textContent=`${t.toString()} result${1!==t?"s":""}`}n.classList.toggle("d-none",0===t.length)}}function it(t){const e=function(){const t=ot();return nt!==t&&(nt=t,et=tt(t)),et}();let n=st(t,e);if(!n)for(const o of t.querySelectorAll(".js-issue-note, .js-issue-note-reference"))if(n=st(o,e))break;t.classList.toggle("d-none",!n)}function at(){const t=s(document,".js-card-filter-input",HTMLInputElement),e=ot();s(document,".js-card-filter-clear").classList.toggle("d-none",0===e.length),function(t,e){const n=new URL(window.location.href,window.location.origin),o=new URLSearchParams(n.search.slice(1));""===e?o.delete(t):o.set(t,e),n.search=o.toString(),a(l(),document.title,n.toString())}(t.name,e),function(t,e){for(const n of document.querySelectorAll(".js-project-fullscreen-link")){const o=new URL(n.getAttribute("href")||"",window.location.origin),s=new URLSearchParams(o.search.slice(1));""===e?s.delete(t):s.set(t,e),o.search=s.toString(),n.setAttribute("href",o.toString())}}(t.name,e)}function lt(){for(const t of document.querySelectorAll(".js-project-columns-container .js-project-column-card"))it(t);ct(),at()}const ut=/:"[^"]*"?$/,dt=/(^|\s+)[^\s:]+$/,mt=/^(\s|$)/;function pt(t){!function(t){if(document.activeElement!==t)return!1;const e=t.value.slice(0,t.selectionEnd),n=t.value.slice(t.selectionEnd),o=0===t.value.trim().length;if(ut.test(e))return!1;const s=dt.test(e)&&mt.test(n);return o||s}(t)?ht():function(t){const e=document.querySelector(".js-card-filter-suggester");if(e instanceof HTMLElement){e.classList.add("js-active-navigation-container"),e.classList.remove("d-none");const n=t.value.slice(0,t.selectionEnd),o=(n.match(ft)||[])[0],r=s(e,".js-card-filter-suggester-helper-container"),c=s(r,".js-card-filter-suggester-helper");jt.test(t.value)?(c.textContent=t.value,r.classList.remove("d-none")):r.classList.add("d-none");const i=s(e,".js-card-filter-suggestions-header");let a=!1;for(const t of e.querySelectorAll(".js-card-filter-suggestion")){const e=t.getAttribute("data-value");e&&e.startsWith(o)?(t.classList.remove("d-none"),a=!0):(t.classList.add("d-none"),t.setAttribute("aria-selected","false"))}i.classList.toggle("d-none",!a)}}(t)}const jt=/(^|\s)[^\s:]+$/,ft=/\S*$/;function ht(){const t=document.querySelector(".js-card-filter-suggester");t instanceof HTMLElement&&(t.classList.remove("js-active-navigation-container"),t.classList.add("d-none"))}function gt(t){const e=s(document,".js-card-filter-input",HTMLInputElement),n=e.value;let o=t,r=!0;n.indexOf(o)>=0?(r=!1,o=n.replace(o,"")):n.length&&(o=`${n.trim()} ${o}`),e.value=o,function(t,e){for(const n of document.querySelectorAll(".js-card-filter[data-card-filter]"))n.getAttribute("data-card-filter")===e&&n.setAttribute("aria-pressed",t.toString())}(r,t),lt()}const vt=!navigator.userAgent.match(/Macintosh/);function bt(t){switch(t){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return t}}class Lt{constructor(t,e){this.item=t,this.onDone=e,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}handleBlur(t){!this.moveInProgress&&t.relatedTarget&&(this.blurring=!0,this.cancel())}isMetaKeyPressed(t){return vt?t.ctrlKey:t.metaKey}inPendingColumn(){return null!=this.item.closest(".js-project-pending-cards")}findColumn(t){return t?document.querySelector(`.js-project-column[data-id="${t}"]`):null}findCard(t){if(!t)return null;let e=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`);return e||(e=document.querySelector(`.js-project-column-card[data-content-id="${t}"]`)),e}isColumn(t){return null!=t&&t.classList.contains("js-project-column")}getColumn(){return this.item.closest(".js-project-column")}getPane(){return this.item.closest(".js-project-pane")}getColumnName(){const t=this.getColumn(),e=t&&t.querySelector(".js-project-column-name");return e?e.textContent:""}getColumnsContainer(){return s(document,".js-project-columns-container")}getNextColumn(){const t=this.getColumn();if(t){const e=t.nextElementSibling;if(this.isColumn(e))return e}}getPreviousColumn(){const t=this.getColumn();if(t){const e=t.previousElementSibling;if(this.isColumn(e))return e}}getFirstColumn(){return this.getColumnsContainer().querySelector(".js-project-column")}getLastColumn(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return t[t.length-1]}getCardID(t){return t&&(t.getAttribute("data-card-id")||t.getAttribute("data-content-id"))||""}getColumnID(t){return t&&t.getAttribute("data-id")||""}isMoving(t){return t===this.item}updateAriaLabel(){}moveTransaction(t){try{this.moveInProgress=!0,t(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}done(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}cancel(){}}class yt extends Lt{constructor(t,e,n){super(t,n),this.moveCard=e,this.pendingCard=this.inPendingColumn(),this.getPane()&&(this.paneColumnCards=t.closest(".js-project-column-cards")),this.columnID=this.getColumnID(this.getColumn()),this.previousCardID=this.getCardID(t.previousElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateStartListener=this.handleUpdateStart.bind(this),this.getColumnsContainer().addEventListener("will-update-project",this.updateStartListener),this.updateEndListener=this.handleUpdateEnd.bind(this),this.getColumnsContainer().addEventListener("update-project",this.updateEndListener)}updateAriaLabel(){const t=this.getCardIndex(),e=t>=0?`to position ${t+1} of ${this.getCardCount()}`:"",n=`in ${this.getColumnName()} column`;this.item.setAttribute("aria-label",`Moved card ${e} ${n}`.trim())}handleUpdateStart(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:230");const e=this.getColumn();if(!e)return void this.done();if(!this.paneColumnCards&&!this.updatePreviousPosition(t.detail))return void this.done();const n=this.getColumnID(e);this.isColumnInState(t.detail,n)?this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}:this.done()}handleUpdateEnd(){const t=this.updateSnapshot;if(this.updateSnapshot=null,!t||!this.getColumn())return void this.done();const e=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(t.columnID));if(e&&n){this.moveToColumn(n);const o=n.children[t.indexInColumn];e!==o&&this.moveToBeforeCard(n,o)}}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(bt(t.key)){case"up":e?this.moveToTop():this.moveUp(),t.preventDefault();break;case"down":e?this.moveToBottom():this.moveDown(),t.preventDefault();break;case"left":e?this.moveToFirstColumn(t.shiftKey):this.moveLeft(t.shiftKey),t.preventDefault();break;case"right":e?this.moveToLastColumn(t.shiftKey):this.moveRight(t.shiftKey),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}updatePreviousPosition(t){if(!t||!t.columns)return!1;const e=this.getCardID(this.item);for(const n of t.columns)for(let t=0;t<n.card_ids.length;t++)if(e===n.card_ids[t].toString())return this.previousCardID=n.card_ids[t-1].toString(),this.columnID=n.id.toString(),!0;return!1}isColumnInState(t,e){if(!t||!t.columns)return!1;for(const n of t.columns)if(e===n.id.toString())return!0;return!1}getCardIndex(){const t=this.getColumnCards(this.getColumn());return t?Array.from(t.children).indexOf(this.item):-1}getCardCount(){const t=this.getColumnCards(this.getColumn());return t?t.querySelectorAll(".js-project-column-card").length:0}getColumnCards(t){return null!=t?t.querySelector(".js-project-column-cards"):null}moveToBeforeCard(t,e){this.moveTransaction(function(n){t.insertBefore(n,e)})}moveToColumn(t){this.moveTransaction(function(e){t.appendChild(e)})}moveUp(){const t=this.item.previousElementSibling,e=this.getColumnCards(this.getColumn());t&&e&&this.moveToBeforeCard(e,t)}moveToTop(){const t=this.getColumnCards(this.getColumn());t&&this.moveTransaction(function(e){t.prepend(e)})}moveDown(){const t=this.item.nextElementSibling,e=this.getColumnCards(this.getColumn());if(t&&e){const n=t.nextElementSibling;n?this.moveToBeforeCard(e,n):this.moveToBottom()}else this.moveToBottom()}moveToBottom(){const t=this.getColumnCards(this.getColumn());t&&this.moveToColumn(t)}moveToFirstColumn(t){const e=this.getColumnCards(this.getFirstColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveToLastColumn(t){const e=this.getColumnCards(this.getLastColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveLeft(t){const e=this.getColumnCards(this.getPane()?this.getLastColumn():this.getPreviousColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveRight(t){const e=this.getColumnCards(this.getNextColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}confirm(){if(this.moved){let t=this.findColumn(this.columnID);this.pendingCard&&!t&&(t=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,t,{keyboardMove:!0})}this.done()}cancel(){let t,e;if(this.moved)if(this.previousCardID){const n=this.findCard(this.previousCardID);n&&(t=n.closest(".js-project-column-cards"),e=n.nextElementSibling)}else this.columnID?(t=this.getColumnCards(this.findColumn(this.columnID)))&&(e=t.firstElementChild):this.paneColumnCards&&(e=(t=this.paneColumnCards).firstElementChild);t&&(e?this.moveToBeforeCard(t,e):this.moveToColumn(t)),this.done()}}class Ct extends Lt{constructor(t,e,n){super(t,n),this.moveColumn=e,this.nextColumnID=this.getColumnID(t.nextElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateListener=this.done.bind(this),this.getColumnsContainer().addEventListener("will-update-project-columns",this.updateListener)}updateAriaLabel(){const t=this.getColumnIndex(),e=t>=0?`to position ${t+1} of ${this.getColumnCount()}`:"";this.item.setAttribute("aria-label",`Moved ${this.getColumnName()} column ${e}`.trim())}getColumnIndex(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(t).indexOf(this.item)}getColumnCount(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(bt(t.key)){case"left":e?this.moveToFirstColumn():this.moveLeft(),t.preventDefault();break;case"right":e?this.moveToLastColumn():this.moveRight(),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}insertBefore(t){const e=this.getColumnsContainer();this.moveTransaction(function(n){e.insertBefore(n,t)})}moveLeft(){const t=this.getPreviousColumn();t&&this.insertBefore(t)}moveRight(){const t=this.getNextColumn();if(t){const e=t.nextElementSibling;e&&this.isColumn(e)?this.insertBefore(e):this.moveToLastColumn()}else this.moveToLastColumn()}moveToFirstColumn(){const t=this.getFirstColumn();t&&this.insertBefore(t)}moveToLastColumn(){const t=this.getLastColumn();if(t){const e=t.nextElementSibling;e&&this.insertBefore(e)}}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}confirm(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}cancel(){if(this.moved){const t=this.findColumn(this.nextColumnID);t?this.insertBefore(t):this.moveToLastColumn()}this.done()}}let wt;const Et=document.querySelector(".js-client-uid");function Tt(t,e){q(t,async function(t,n,o){try{await e(t,n,o)}catch(s){throw s.response&&await St("project-update-error"),s}})}function kt(t){h(t,"details-dialog",DetailsDialogElement).toggle(!1)}async function St(t,e){const n=s(document,`#${t}`,HTMLTemplateElement),o=await $({content:n.content.cloneNode(!0),dialogClass:"project-dialog"});return e&&e.setAttribute("aria-expanded","true"),o.addEventListener("dialog:remove",function(){e&&e.setAttribute("aria-expanded","false")},{once:!0}),o}function At(t,e){const n=s(t,".js-column-card-count"),o=parseInt(n.textContent.trim()),r=t.getAttribute("data-id");let c,a=o+e;0===e&&(a=0),n.textContent=a.toString(),r&&((c=s(document,`.js-project-column-navigation-item[data-column-id="${r}"] .js-column-nav-card-count`)).textContent=a.toString());const l=`Contains ${a} ${i(a,"item")}`;n.setAttribute("aria-label",l),c&&c.setAttribute("aria-label",l)}function Mt(t,e){const n=D(t,"keyboard_move");e&&!0===e.keyboardMove?n.value="true":n.value=""}function xt(t,e,n){e&&(!function(t){t.classList.contains("js-project-pending-cards-container")&&0===t.querySelectorAll(".js-project-column-card").length&&t.remove()}(e),At(e,-1));const o=t.closest(".js-project-column");if(!o)return;const r=d(o,"data-id");t.setAttribute("data-column-id",r),At(o,1),function(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){const n=null==t.querySelector(".js-project-column-card");n&&(e.value="1")}}}();const c=s(o,".js-project-content-form",HTMLFormElement);c.reset(),function(t,e){const n=D(t,"card_id"),o=D(t,"content_id"),s=D(t,"content_type");if(!e)return n.value="",o.value="",void(s.value="");const r=e.getAttribute("data-card-id");r?(n.value=r,o.value="",s.value=""):(n.value="",o.value=d(e,"data-content-id"),s.value=d(e,"data-content-type")),D(t,"client_uid").value=wt}(c,t);const i=t.previousElementSibling,a=D(c,"previous_card_id");a.value=i?d(i,"data-card-id"):"",Mt(c,n),p(c)}function Ht(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:214");if(e.closest(".js-project-triage-pane"))return;const n=t.from;xt(e,n&&n.closest(".js-project-column")),e.focus()}function It(t){const e=t.closest(".js-project-column");e&&At(e,-1),t.remove()}Et&&(wt=d(Et,"data-uid"));const qt=/^#card-(\d+)$/;function $t(t,e){const n=s(document,".js-reorder-columns-form",HTMLFormElement);D(n,"column_id").value=d(t,"data-id");const o=t.previousElementSibling,r=D(n,"previous_column_id");r.value=o?d(o,"data-id"):"",Mt(n,e),p(n)}function Dt(t){if(t.related&&!t.related.matches(".js-project-column"))return!1}function _t(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:284");$t(e),e.focus()}function Bt(){const t=document.querySelector(".js-project-search-form");t instanceof HTMLFormElement&&p(t)}function Pt(){const t=document.querySelector(".js-project-archived-cards-search-form");t instanceof HTMLFormElement&&p(t)}function Ft(t,e,n){let o;return t&&(o=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`)),!o&&e&&n&&(o=document.querySelector(`.js-project-column-card[data-content-type="${n}"][data-content-id="${e}"]`)),o}var Rt,Kt;function Ut(t){const e=s(document,".js-new-project-column-container"),n=s(document,".js-new-column-blankslate"),o=s(e,".js-new-column-button");n.classList.toggle("d-none",!t),o.classList.toggle("d-none",t),t&&Nt(".js-project-triage-pane",!1)}function Nt(t,e){for(const n of document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer"))n.classList.toggle("hide-sm",e);for(const n of document.querySelectorAll(".js-project-columns"))n.classList.toggle("push-board-over",e);for(const n of document.querySelectorAll(t))n.classList.toggle("d-none",!e),n.classList.toggle("hide-sm",!e)}function Wt(t){const e=document.querySelector(".js-project-archived-cards-results");if(e){const n=d(e,"data-project-archived-cards-url"),o=new URL(n,window.location.origin),s=new URLSearchParams(o.search.slice(1));t&&s.append("card_id",t),o.search=s.toString(),e.setAttribute("src",o.toString())}}function Ot(t,e){s(document,".js-show-triage-field",HTMLInputElement).value=e?"show":"",Bt()}function Vt(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelectorAll(".js-project-column-card"),n={};for(const t of e){const e=t.getAttribute("id");e&&(n.hasOwnProperty(e)&&t.remove(),n[e]=!0)}}}function zt(t){const e=t.closest(".js-details-container");e&&e.classList.remove("open","Details--on")}function Gt(t){if(!(t instanceof KeyboardEvent))throw new Error("invariant: app/assets/modules/github/projects.js:840");if("Escape"===S(t)){if(!(t.currentTarget instanceof Element))throw new Error("invariant: app/assets/modules/github/projects.js:843");zt(t.currentTarget)}}function Jt(t){const e=t.closest(".js-project-column");if(!e)return;const n=t.value;if(t.setAttribute("data-preview-text",n),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(n)){const t=s(e,".js-preview-note-form",HTMLFormElement);D(t,"note").value=n,p(t)}else s(e,".js-note-preview").innerHTML=""}function Xt(t){_(t);const e=s(t,".js-task-list-field",HTMLTextAreaElement);e.defaultValue=e.value;for(const n of g(t,".task-list-item-checkbox",HTMLInputElement))n.defaultChecked=n.checked}m("change",".js-toggle-linked-repo-scope",function(t){const e=t.currentTarget;if(!(e instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.js:323");const n=e.form;if(!n)throw new Error("invariant: app/assets/modules/github/projects.js:325");const o=s(n,".js-project-triage-search-text",HTMLInputElement),r=o.value||"";let c;(c=e.checked?r.replace(/(\s|^)repo:[^\s]*\s*/gi,"$1").trim():`${r.trim()} repo:*`)!==r&&(o.value=c,p(n))}),m("click",".js-project-show-all-archived-cards",Pt),Tt(".js-project-update-card",async function(t,e){const n=await e.html(),o=s(n.html,"*"),r=Ft(o.getAttribute("data-card-id"),o.getAttribute("data-content-id"),o.getAttribute("data-content-type")),c=!(!r||r!==r.ownerDocument.activeElement);r&&r.replaceWith(o),c&&o.focus()}),Rt="project-clone-error",Kt=async function(t,e){const n=await e.json(),o=n.json.project_url,r=n.json.job_status_url;try{await j(r),window.location=o}catch(c){if(o){const t=await St("project-clone-partial-error");s(t,".js-cloned-board-link").setAttribute("href",o)}else await St("project-clone-error")}},q(".js-project-clone-form",async function(t,e,n){const o=s(t,".form-actions"),r=s(t,".js-project-loader");o.classList.add("d-none"),r.classList.remove("d-none");try{await Kt(t,e,n)}catch(c){throw c.response&&await St(Rt),o.classList.remove("d-none"),r.classList.add("d-none"),c}}),Tt(".js-convert-note-to-issue-form",async function(t,e){try{await e.text(),kt(t)}catch(n){if(!function(t){try{return t&&t.json&&"note_already_converted_to_issue"===t.json.error_code}catch(n){return!1}}(n.response))throw n;{const e=s(t,".js-convert-note-error-container");e.innerHTML="",e.append(f(document,n.response.json.error_html))}}}),Tt(".js-change-project-state-form",async function(t,e){const n=document.activeElement;n&&t.contains(n)&&n.blur(),await e.text(),kt(t)}),m("click",".js-add-project-description",async function(){const t=await St("edit-project");s(t,"#edit-project-name").removeAttribute("autofocus"),s(t,"#edit-project-body").setAttribute("autofocus","")}),m("click",".js-project-target-owner",function(t){const e="repository"===d(t.currentTarget,"data-owner-type"),n=h(t.currentTarget,".js-project-clone-dialog");if(s(n,".js-project-clone-visibility").classList.toggle("d-none",e),e){s(n,".js-project-clone-private",HTMLInputElement).checked=!0}}),m("click",".js-refresh-project",function(){window.location.reload()}),Tt(".js-create-project-column",async function(t,e){const n=await e.html(),o=s(n.html,"*");if(o.classList.contains("js-column-form-container")){h(t,".js-column-form-container").replaceWith(o),Qt()}else{s(document,".js-new-project-column-container").before(n.html),kt(t),function(t){const e=document.querySelector(".js-project-column-nav");e&&V(s(e,".js-column-nav-template",HTMLTemplateElement),e,t.getAttribute("data-id")||"",s(t,".js-project-column-name").textContent,s(t,".js-column-card-count").textContent,!0)}(o);const e=o.getAttribute("data-id");e&&(oe(e),ne(e),se()),s(document,".js-new-column-blankslate").classList.contains("d-none")||Ut(!1)}}),Tt(".js-update-project-column",async function(t,e){const n=await e.html(),o=s(n.html,"*");if(o.classList.contains("js-column-form-container")){h(t,".js-column-form-container").replaceWith(o),Qt()}else{const e=d(t,"data-column-id");s(document,`.js-project-column[data-id="${e}"]`).replaceWith(o),function(t){const e=t.getAttribute("data-id");if(!e)return;const n=document.querySelector(`.js-project-column-navigation-item[data-column-id="${e}"]`);n instanceof HTMLAnchorElement&&O(n,e,s(t,".js-project-column-name").textContent,s(t,".js-column-card-count").textContent)}(o),kt(t)}}),Tt(".js-delete-project-column",async function(t,e){await e.text();const n=d(t,"data-column-id"),o=g(document,".js-project-column",HTMLElement);s(document,`.js-project-column[data-id="${n}"]`).remove(),kt(t),function(t){for(const e of document.querySelectorAll(".js-project-column-navigation-item"))if(t===e.getAttribute("data-column-id"))return void e.remove()}(n),1===o.length&&Ut(!0)}),Tt(".js-archive-project-column",async function(t,e){await e.text();const n=d(t,"data-column-id");!function(t){s(t,".js-project-column-cards").innerHTML="",At(t,0)}(s(document,`.js-project-column[data-id="${n}"]`)),kt(t)}),v(".js-project-column-card, .js-project-column",{constructor:HTMLElement,initialize(t){t.id===document.location.hash.substr(1)&&setTimeout(()=>{document.querySelector(".js-project-page-mobile")||t.focus()},1)}}),Tt(".js-remove-card-after-request",async function(t,e){await e.text(),It(h(t,".js-project-column-card")),Bt()}),Tt(".js-archive-project-card",async function(t,e){It(h(t,".js-project-column-card")),await e.text(),Pt()}),Tt(".js-unarchive-project-card",async function(t,e){const n=h(t,".js-project-column-card"),o=d(n,"data-column-id"),s=document.querySelector(`.js-project-column[data-id="${o}"] .js-project-column-cards`);s&&(d(t,"data-move-to-bottom")?s.append(n):s.prepend(n),xt(n),n.focus()),e.text()}),Tt(".js-project-archived-cards-search-form",async function(t,e){const n=h(t,".js-project-archived-cards-pane"),o=s(n,".js-project-column-cards");let r;o.textContent="Loading…",t.classList.add("loading");try{r=await e.html()}catch(c){}o.innerHTML="",r&&o.append(r.html),t.classList.remove("loading")}),b(async function({target:t}){if(t instanceof HTMLElement)t.matches(".js-project-column-card")?t.focus():t.matches(".js-project-column")&&(oe(d(t,"data-id")),se());else if(document.location.hash.length>0){const t=function(){const t=document.location.hash.match(qt);return t?t[1]:null}();if(null!=t){const n=document.querySelector(".js-project-archived-cards-pane");if(n){const o=d(n,"data-project-archived-card-url");let s;try{s=await L(o.replace("{card_id}",t))}catch(e){}null!=s&&(Wt(t),Nt(".js-project-archived-cards-pane",!0))}}}}),m("click",".js-show-project-triage",function(){Nt(".js-project-pane",!1),Nt(".js-project-menu-pane",!0),Nt(".js-project-triage-pane",!0);const t=s(document,".js-project-triage-pane");t.addEventListener("animationend",function(){s(t,".js-project-triage-search-text",HTMLInputElement).focus()},{once:!0})}),m("click",".js-show-archived-cards",function(){Wt(),Nt(".js-project-pane",!1),Nt(".js-project-menu-pane",!0),Nt(".js-project-archived-cards-pane",!0)}),m("click",".js-show-project-menu",function(){!function(){const t=document.querySelector(".js-project-activity-results");if(t){const e=d(t,"data-project-activity-url"),n=new URL(e,window.location.origin);t.setAttribute("src",n.toString())}}(),Nt(".js-project-pane",!1),Nt(".js-project-menu-pane",!0)}),m("click",".js-hide-project-menu",function(){Nt(".js-project-pane",!1)}),m("click",".js-show-triage",function(t){Ot(0,!0)}),m("click",".js-hide-triage",function(t){Ot(0,!1)}),Tt(".js-project-search-form",async function(t,e){if(function(t){const e=t.querySelector(".js-toggle-linked-repo-scope"),n=s(t,".js-project-triage-search-text",HTMLInputElement);return!!(e instanceof HTMLInputElement&&e.checked)&&function(t,e){return null!=tt(t)[e]}(n.value,"repo")}(t)){s(t,".js-toggle-linked-repo-scope",HTMLInputElement).checked=!1}t.classList.add("loading");const n=await e.html(),o=h(t,".js-project-triage-pane"),r=s(o,".js-project-search-results");r.innerHTML="",r.append(n.html),t.classList.remove("loading")}),Tt(".js-project-activity-form",async function(t,e){const n=await e.html(),o=h(t,".js-project-activity-pane"),s=o.querySelector(".js-project-activity-container");if(s){if(!(s instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:783");s.innerHTML="",s.append(n.html)}if(o){if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:789");o.classList.remove("Details--on")}}),v(".js-project-column-card",function(t){if(t.getAttribute("data-card-id")){const e=d(t,"data-content-type"),n=d(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}}),v(".js-more-search-cards-form",{subscribe:t=>y(t,"page:loaded",Vt)}),m("click",".js-dismiss-note-form-button",function(t){zt(t.currentTarget)}),u(".js-note-text",function(t){const e=t;if(!(e instanceof HTMLTextAreaElement))throw new Error("invariant: app/assets/modules/github/projects.js:869");C(e,Jt),e.addEventListener("blur",function(){w(e,Jt)},{once:!0})}),v(".js-project-note-form",{subscribe:t=>y(t,"keyup",Gt)}),Tt(".js-preview-note-form",async function(t,e){const n=h(t,".js-project-column"),o=s(n,".js-note-text",HTMLTextAreaElement),r=s(n,".js-note-preview");let c;try{c=(await e.html()).html}catch(i){}r.innerHTML="",c&&o.getAttribute("data-preview-text")===o.value&&r.appendChild(c)}),m("tab-container-changed",".js-project-picker-tabs",async function(t){if(!(t instanceof CustomEvent))return;const e=t.currentTarget,n=s(e,"remote-input",E);n.setAttribute("aria-owns",t.detail.relatedTarget.id),n.src=d(t.detail.relatedTarget,"data-filter-url")}),Tt(".js-project-note-form",async function(t,e){const n=s(t,"textarea",HTMLTextAreaElement);n.disabled=!0;const o=s(t,"button",HTMLButtonElement);o.disabled=!0;const r=t.closest(".js-project-column");if(r){s(r,".js-note-text").removeAttribute("data-preview-text")}let c;try{c=await e.html()}catch(i){if(c=i.response,r&&c&&409===c.status&&c.html){const t=s(r,".js-note-preview");t.innerHTML="",t.appendChild(c.html)}return c&&422===c.status&&await St("project-update-error"),o.disabled=!1,n.blur(),n.disabled=!1,void n.focus()}if(r){s(r,".js-note-preview").innerHTML="",function(t,e){s(t,".js-project-column-cards").prepend(e),At(t,1)}(r,c.html)}else!function(t,e){const n=e.querySelector("*");if(!n||!n.classList.contains("js-note-form-container")){const n=d(t,"data-card-id"),o=document.getElementById(`card-${n}`);o&&o.replaceWith(e),t.reset(),kt(t)}else h(t,".js-note-form-container").replaceWith(e)}(t,c.html);n.blur(),n.disabled=!1,T(n,""),n.focus()}),Tt(".js-project-column-card .js-comment-update",async function(t,e,n){const o=h(t,".js-task-list-container"),r=h(t,".js-project-column-card"),c=d(t,"data-note-version");let i;n.headers.set("X-Note-Version",c);try{i=await e.json()}catch(u){if((i=u.response)&&422===i.status&&i.json.stale)return K(i.json.message),Xt(o),void k(r);throw u}t.setAttribute("data-note-version",i.json.note_version);const a=i.json.note;s(o,".js-task-list-field",HTMLTextAreaElement).value=a;const l=s(r,".js-edit-note-template",HTMLTemplateElement);s(l.content,".js-edit-note-input",HTMLTextAreaElement).textContent=a,Xt(o)});const Zt=o(function(){ct(),at()},1);async function Qt(t){const e=document.querySelector(".js-project-column-automation");if(!e)return;const n=h(e,".js-column-settings-form"),o=s(e,".js-project-automation-options",IncludeFragmentElement),r=s(n,".js-project-autmoation-loader"),c=s(n,".js-column-purpose-details"),i=t||d(e,"data-src");function a(t){c.hidden=t,r.hidden=!t}o.src=i,o.addEventListener("loadstart",()=>a(!0)),o.addEventListener("loadend",()=>a(!1))}function Yt(t){return t.matches(".js-drag-by-handle")?"position-fixed":null}function te(t){return t.matches(".js-drag-by-handle")?".js-project-dragger":null}function ee(){let t;if(document.location.hash.startsWith("#column-")&&(t=document.getElementById(document.location.hash.substr(1))),t||(t=document.querySelector(".js-project-column")),t){const e=t.getAttribute("data-id");e&&(oe(e),se())}}function ne(t){if(!document.querySelector(".js-project-page-mobile"))return;const e=document.createElement("a");e.href=`#column-${t}`,a(null,"",e.href)}function oe(t){for(const e of document.querySelectorAll(".js-project-column"))e.classList.toggle("hide-sm",t!==e.getAttribute("data-id")),t===e.getAttribute("data-id")?e.setAttribute("data-active-column",""):e.removeAttribute("data-active-column");for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.classList.toggle("selected",t===e.getAttribute("data-column-id"))}function se(){const t=document.querySelector(".js-project-column-navigation-item.selected");if(!t)return;const e=h(t,".js-project-column-nav"),n=t.offsetLeft,o=t.offsetWidth,s=n+o,r=window.innerWidth;(s-e.scrollLeft>r||s<e.scrollLeft)&&(e.scrollLeft=n-r/2+o/2)}function re(){const t=s(document,".js-project-issue-body-wrapper"),e=s(document,".js-project-issue-body-container"),n=t.getBoundingClientRect().height,o=e.getBoundingClientRect().height>n;s(document,".js-project-issue-body-blur").classList.toggle("d-none",!o),s(document,".js-project-issue-body-details-target").classList.toggle("d-none",!o)}async function ce(t,e){const n=document.querySelector(".js-project-card-details-pane");if(!n)return!1;const o=d(t,"href"),r=s(n,".js-project-card-details"),c=t.closest(".js-project-pane"),i=null!=c;if(Nt(".js-project-card-details-pane",!0),s(n,".js-project-card-details-header").classList.toggle("d-none",!i),c&&function(t,e){const n=s(t,".js-project-card-details-back-template",HTMLTemplateElement).content.cloneNode(!0),o=d(e,"data-back-to-label"),r=d(e,"data-back-to-class");s(n,".js-project-card-details-back-to-title").textContent=o,s(n,".js-project-card-details-back-link").classList.add(r);const c=s(t,".js-project-card-details-back-container");c.innerHTML="",c.appendChild(n)}(n,c),o===r.getAttribute("data-issue-url"))return void(e&&ie());const a=function(t,e){const n=h(t,".js-project-issue-details-container"),o=s(document,".js-project-card-details-loader-template",HTMLTemplateElement).content.cloneNode(!0),r=s(n,".js-issue-octicon",SVGElement).classList.contains("open");s(o,".js-issue-title").textContent=t.textContent,s(o,".js-issue-number").textContent=s(n,".js-issue-number").textContent,s(o,".js-issue-state").textContent=r?"Close":"Reopen";const c=d(t,"data-content-label");for(const s of g(o,".js-issue-type"))s.textContent=c;for(const s of g(o,".js-project-card-details-external-link"))s.setAttribute("href",t.getAttribute("href")||"#"),s.setAttribute("data-ga-click",`Project board, go to ${c}, location:sidebar`);s(o,".js-hide-project-menu").classList.toggle("d-none",e);const i=s(o,".js-issue-repository");i.textContent=d(t,"data-content-repo-label"),i.setAttribute("href",t.getAttribute("data-content-repo-url")||"#");const a=s(o,".js-project-card-details-loader-octicon");return a.innerHTML="",a.appendChild(s(n,".js-issue-octicon",Element).cloneNode(!0)),o}(t,i);let l;r.innerHTML="",r.appendChild(a),r.setAttribute("data-issue-url",o);try{l=await B(document,`${o}/show_from_project`)}catch(u){return void function(t,e){s(t,".js-project-card-details-error").classList.remove("d-none"),s(t,".js-project-card-details-loader").classList.add("d-none"),s(t,".js-project-card-details-retry").addEventListener("click",function(){t.removeAttribute("data-issue-url"),ce(e,!1)},{once:!0})}(r,t)}if(r.getAttribute("data-issue-url")===o){const t=l.querySelector(".js-hide-project-menu");t&&t.classList.toggle("d-none",i),r.innerHTML="",r.appendChild(l),re(),e&&ie()}}function ie(){const t=document.querySelector(".js-project-card-details-pane");t&&s(t,".js-project-card-details-external-link").focus()}function ae(t){if("d"!==t.key)return;const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:1673");const n=e.querySelectorAll(".js-project-card-issue-link");1===n.length&&(ce(n[0],!0),t.preventDefault())}function le(){const t=s(document,".js-project-create-linked-repo-list"),e=s(t,".js-blankslate"),n=s(document,".js-project-create-linked-repo-search-input-group"),o=s(document,".js-project-create-linked-repo-max"),r=g(t,".js-project-repo-link-badge").length,c=r>=parseInt(o.getAttribute("data-max"),10);n.classList.toggle("d-none",c),o.classList.toggle("d-none",!c),e.classList.toggle("d-none",r>0)}m("click",".js-card-filter-clear",function(){const t=s(document,".js-card-filter-input",HTMLInputElement);t.value="",c(t,"input")}),m("change",".js-column-purpose-value",function(t){if(!(t.currentTarget instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.js:1043");Qt(d(t.currentTarget,"data-preset-url"))}),v(".project-dialog .js-project-column-automation",function(){Qt()}),v(".js-project-column-card",{constructor:HTMLElement,add(t){it(t),Zt()},remove:Zt}),v(".js-card-filter-input",{constructor:HTMLInputElement,add(t){t.addEventListener("input",o(lt,500)),C(t,function(){pt(t)})}}),m("focusin",".js-card-filter-input",function(t){t.currentTarget instanceof HTMLInputElement&&pt(t.currentTarget)}),m("focusout:delay",".js-card-filter-input",function(){ht()}),m("click",".js-card-filter-suggestion",function(){s(document,".js-card-filter-input",HTMLInputElement).focus()}),m("click",".js-card-filter",function(t){const e=t.currentTarget.getAttribute("data-card-filter");e&&gt(e)}),m("navigation:keydown",".js-card-filter-suggester",function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1114");switch(S(t.detail.originalEvent)){case"Escape":t.preventDefault(),ht();break;case"ArrowLeft":case"ArrowRight":case"Enter":ht()}}),m("navigation:open",".js-card-filter-suggester",function(t){const e=document.querySelector(".js-card-filter-input");if(e instanceof HTMLInputElement){const n=s(document,".js-card-filter-suggester"),o=d(t.target,"data-value"),r=e.value.slice(0,e.selectionEnd).replace(/\S+$/,""),i=e.value.slice(e.selectionEnd);n.classList.contains("d-none")||(t.preventDefault(),e.value=r+o+i,c(e,"input"),pt(e)),ht()}}),m("socket:message",".js-project-columns-container",async function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1165");const e=t.detail.data;if(!function(t){const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.js:1156");const n=t.detail.name,o=e.getAttribute("data-channel");return/^projects:\d+$/.test(n)&&n!==o}(t))if(wt!==e.client_uid){const n=t.currentTarget;Bt(),Pt(),await A(),G(n,e)}else"column_automation_updated"===e.action&&null!=e.state&&function(t){for(const e of t.columns){const t=document.getElementById(`column-${e.id}`);t&&W(e,t)}}(e.state)}),document.addEventListener("socket:message",function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1183");const{data:e,name:n}=t.detail;if(e&&e.locked&&function(){const t=document.querySelector(".js-project-lock-container");if(t){const e=s(t,".Popover"),n=e.classList.contains("d-none");if(e.classList.toggle("d-none",!0),!n){const e=document.activeElement;if(t.contains(e)){const t=document.querySelector(".js-project-header");t&&t.focus()}}}}(),e&&e.is_project_activity){const t=document.querySelector(".js-project-activity-pane");t&&t.classList.add("Details--on")}n&&n.startsWith("projects:metadata:")&&(document.title=e.name)}),v(".js-project-columns-drag-container",{constructor:HTMLElement,add(t){M.create(t,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:Yt(t),handle:te(t),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:Dt,onUpdate:_t})}}),v(".js-card-drag-container",{constructor:HTMLElement,add(t){M.create(t,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:Yt(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:te(t),handleReplacedDragElement:!0,group:"project-card",onAdd:Ht,onUpdate:Ht})}}),v(".js-project-search-results-drag-container",{constructor:HTMLElement,add(t){M.create(t,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:Yt(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:te(t),group:{name:"project-card",put:!1,pull:!0},onAdd:Ht,onUpdate:Ht})}}),v(".js-project-column-card",function(t){if(t.getAttribute("data-card-id")){const e=d(t,"data-content-type"),n=d(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}}),v(".js-client-uid-field",{constructor:HTMLInputElement,add(t){t.value=wt}}),v(".js-project-column[data-active-column]",{remove(){document.querySelector(".js-project-column[data-active-column]")||ee()}}),m("click",".js-project-column-navigation-item",function(t){t.preventDefault();const e=d(t.currentTarget,"data-column-id");oe(e),ne(e)}),m("click",".js-open-active-column-dialog",function(t){const e=document.querySelector(".js-project-column[data-active-column]");if(e){const n=d(e,"data-id");St(`${d(t.currentTarget,"data-dialog-prefix")}-${n}`)}}),m("click",".js-toggle-project-edit-mode",function(t){if(t.currentTarget.classList.toggle("selected"),!document.body)throw new Error("invariant: app/assets/modules/github/projects.js:1402");document.body.classList.toggle("project-edit-mode")}),m("click",".js-move-card-to-column-button",function(t){const e=t.currentTarget.getAttribute("data-card-id"),n=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),s=d(t.currentTarget,"data-column-id"),r=Ft(e,n,o),c=document.querySelector(`.js-project-column[data-id="${s}"] .js-project-column-cards`);if(r&&c){t.currentTarget.hasAttribute("data-change-active-column")&&(oe(s),ne(s),se());const e=r.closest(".js-project-column");c.prepend(r),xt(r,e)}}),m("click",".js-add-note-button",function(t){t.preventDefault();const e=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");e&&x(e)}),m("click",".js-project-lock-info-button, .js-close-project-lock-popover",function(){const t=s(document,".js-project-lock-container .Popover"),e=t.classList.contains("d-none");t.classList.toggle("d-none",!e)}),P(function(t){t.matches(".js-project-card-details-pane .js-comment .js-comment-update")&&re()}),m("click",".js-hide-project-card-details",function(){const t=s(document,".js-project-card-details");t.removeAttribute("data-issue-url"),t.innerHTML=""}),u(".js-project-column-card",function(t){t.addEventListener("keydown",ae),t.addEventListener("blur",function(){t.removeEventListener("keydown",ae)},{once:!0})}),m("click",".js-project-card-issue-link",function(t){if(!(t instanceof MouseEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1704");(function(t){return!(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||0!==t.button)})(t)&&(ce(t.currentTarget,!1),t.preventDefault())}),Tt(".js-project-card-issue-details-title",async function(t,e){const n=h(t,".js-details-container"),o=await e.json();x(n),null!=o.json.issue_title&&(s(n,".js-issue-title").textContent=o.json.issue_title);for(const s of t.elements)(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&(s.defaultValue=s.value)}),m("auto-complete-change",".js-project-create-repo-link-auto-complete",function({target:t}){if(!(t instanceof H))throw new Error("invariant: app/assets/modules/github/projects.js:1753");const e=t.querySelector(`.js-project-repo-link-badge[data-repo-name="${t.value}"]`);if(!e)return;const n=s(document,".js-project-create-linked-repo-list"),o=s(e,".js-repo-id",HTMLInputElement);let r=!1;for(const s of g(n,".js-repo-id",HTMLInputElement))if(s.value===o.value){r=!0;break}r||(o.disabled=!1,n.append(e),e.classList.remove("d-none")),t.value="",le()}),m("click",".js-remove-project-repo-link",function(t){h(t.target,".js-project-repo-link-badge").remove(),le()}),I("keydown",".js-project-create-linked-repo-search",function(t){"Enter"===t.key&&t.preventDefault()}),m("click",".js-project-dialog-button",function({currentTarget:t}){St(d(t,"data-dialog-id"),t)}),m("click",".js-project-active-column-dialog-button",async function({currentTarget:t}){const e=d(t,"data-dialog-id");!function(t,e){const n=s(t,".js-move-card-to-column-dialog-body"),o=h(e,".js-project-column-card"),r=o.closest(".js-project-column"),c=r&&r.getAttribute("data-id"),i=s(document,"#move-card-to-column-button-template",HTMLTemplateElement),a=s(t,".js-move-card-to-column-title");a.textContent=o.closest(".js-project-archived-cards-pane")?d(a,"data-restore-title"):d(a,"data-move-title"),n.innerHTML="";for(const l of document.querySelectorAll(".js-project-column-navigation-item")){const t=d(l,"data-column-id"),r=s(i.content.cloneNode(!0),".js-move-card-to-column-button",HTMLButtonElement);r.setAttribute("data-card-id",d(o,"data-card-id")),r.setAttribute("data-content-id",d(o,"data-content-id")),r.setAttribute("data-content-type",d(o,"data-content-type")),r.setAttribute("data-column-id",t),e.hasAttribute("data-change-active-column")&&r.setAttribute("data-change-active-column",""),r.textContent=d(l,"data-column-name"),r.disabled=null!=c&&t===c,n.appendChild(r)}}(await St(e,t),t)}),m("details-menu-select",".js-project-change-state-sync-menu",function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.js:1811");const e=h(t.detail.relatedTarget,".js-project-change-state-sync-menu-parent"),n=s(t.detail.relatedTarget,"[data-menu-button-text]").textContent.trim();s(e,".js-project-change-state-sync-menu-button").textContent=n},{capture:!0}),function(t,e){let n,o;function s(e){if(n)return;const o=e.currentTarget;if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:704");switch(bt(e.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;n=new yt(o,t,function(){n=null}),e.preventDefault();break;case"up":{const t=o.previousElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:724");t.focus(),e.preventDefault()}else{const t=o.closest(".js-project-column");t instanceof HTMLElement&&(t.focus(),e.preventDefault())}break}case"down":{const t=o.nextElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:744");t.focus(),e.preventDefault()}break}}}function r(t){if(o)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=t.currentTarget;if(!(n instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:760");switch(bt(t.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;o=new Ct(n,e,function(){o=null}),t.preventDefault();break;case"down":{const e=n.querySelector(".js-project-column-card");e&&(e.focus(),t.preventDefault());break}case"left":{const e=n.previousElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:790");e.focus(),t.preventDefault()}break}case"right":{const e=n.nextElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.js:803");e.focus(),t.preventDefault()}break}}}u(".js-project-column-card",function(t){if(n){if(n.isMoving(t))return;n.cancel()}t.addEventListener("keydown",s),t.addEventListener("blur",function e(){n&&n.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",s))})}),u(".js-project-column",function(t){if(o){if(o.isMoving(t))return;o.cancel()}t.addEventListener("keydown",r),t.addEventListener("blur",function e(){o&&o.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",r))})})}(xt,$t),ee()}}});
//# sourceMappingURL=projects-d682a3de.js.map
